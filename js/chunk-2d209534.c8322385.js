(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d209534"],{a928:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("b-table",{attrs:{hover:"",items:e.records,selectable:"","select-mode":"single","selected-variant":"primary"},on:{"row-selected":e.onRecordSelected},scopedSlots:e._u([{key:"cell(url)",fn:function(e){return[r("b-button",{attrs:{pill:"",variant:"outline-primary",size:"sm"}},[r("a",{attrs:{href:e.item.url,target:"_blank"}},[r("b-icon-link45deg")],1)])]}}])}),r("a",{attrs:{href:e.url,target:"_blank"}},[e._v("table "),r("b-icon-link45deg")],1),r("br"),r("b-modal",{attrs:{id:"modal-record"},on:{ok:e.onValidModal},scopedSlots:e._u([{key:"modal-title",fn:function(){return[r("EditableSpan",{model:{value:e.record.name,callback:function(t){e.$set(e.record,"name",t)},expression:"record.name"}})]},proxy:!0}])},[r("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-note",modifiers:{"modal-note":!0}}],attrs:{pill:"",size:"sm"}},[r("b-icon-plus"),e._v(" Add a note")],1),r("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-files",modifiers:{"modal-files":!0}}],attrs:{pill:"",variant:"outline-primary",size:"sm"}},[r("b-icon-plus"),e._v(" Add images files")],1)],1),r("b-modal",{attrs:{id:"modal-note",title:"New Note"},on:{ok:e.addNote}},[r("b-form-textarea",{attrs:{id:"textarea",placeholder:"Enter something...",rows:"3","max-rows":"6"},model:{value:e.note,callback:function(t){e.note=t},expression:"note"}})],1),r("b-modal",{attrs:{id:"modal-files",title:"Add files"},on:{ok:e.addFiles}},[r("b-form-file",{attrs:{multiple:"",accept:"*",placeholder:"Choose a file or drop it here...","drop-placeholder":"Drop file here..."},on:{input:e.onInput},model:{value:e.files,callback:function(t){e.files=t},expression:"files"}}),r("div",{ref:"preview"})],1)],1)},a=[],o=(r("4160"),r("fb6a"),r("b0c0"),r("d3b7"),r("ac1f"),r("466d"),r("1276"),r("5cc6"),r("9a8c"),r("a975"),r("735e"),r("c1ac"),r("d139"),r("3a7b"),r("d5d6"),r("82f8"),r("e91f"),r("60bd"),r("5f96"),r("3280"),r("3fcc"),r("ca91"),r("25a1"),r("cd26"),r("3c5d"),r("2954"),r("649e"),r("219c"),r("170b"),r("b39a"),r("72f7"),r("159b"),r("96cf"),r("1da1")),c=r("668b"),s=r("6655"),i=r.n(s),l=r("9b92"),u=r("00e8"),d=r.n(u),p=r("7fed"),f=r.n(p),b=r("11c1"),h=r("16a6"),m=r.n(h),w=new f.a(d.a),v={name:"TableView",props:["url"],data:function(){return{records:[],record:{},note:"",files:[]}},created:function(){console.log("URL",this.url),this.getRecords()},methods:{getRecords:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,n,a,o,s,l,u,d;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.records=[],r=!0,n=!1,t.prev=3,o=Object(c["a"])(i.a[e.url]["https://www.dublincore.org/specifications/dublin-core/dcmi-terms/hasPart"]);case 5:return t.next=7,o.next();case 7:return s=t.sent,r=s.done,t.next=11,s.value;case 11:if(l=t.sent,r){t.next=21;break}return u=l,t.next=16,i.a[u].label;case 16:d=t.sent,e.records.push({label:d,url:"".concat(u)});case 18:r=!0,t.next=5;break;case 21:t.next=27;break;case 23:t.prev=23,t.t0=t["catch"](3),n=!0,a=t.t0;case 27:if(t.prev=27,t.prev=28,r||null==o.return){t.next=32;break}return t.next=32,o.return();case 32:if(t.prev=32,!n){t.next=35;break}throw a;case 35:return t.finish(32);case 36:return t.finish(27);case 37:case"end":return t.stop()}}),t,null,[[3,23,27,37],[28,,32,36]])})))()},onRecordSelected:function(e){console.log(e),e.length>0&&(this.record=e[0],this.$bvModal.show("modal-record"))},onInput:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){var n,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return console.log(e),n=t.$refs.preview,a=t.storage+t.privacy+"/table/files/",r.next=5,e.forEach(function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:console.log(t),m()([t]).image(m.a.text.center(a,"30px Josefin Slab","#fff",.8)).then((function(e){e.name=t.name,e.type=t.type,e.width="100",n.appendChild(e)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 5:case"end":return r.stop()}}),r)})))()},addFiles:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,n,a,c,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.record.url,n=e.$refs.preview,a=e.dataURLtoFile,c=[].slice.call(n.children),console.log(c),s=e.storage+e.privacy+"/table/files/",console.log(s),t.prev=7,t.next=10,c.forEach(function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var n,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=s+t.name,console.log(encodeURI(n)),o=a(t.src,t.name),e.next=5,w.createFile(encodeURI(n),o,t.type);case 5:return e.next=7,i.a[r]["https://www.dublincore.org/specifications/dublin-core/dcmi-terms/hasPart"].add(Object(l["namedNode"])(encodeURI(n)));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:alert(c.length+" fichiers sauvegard√©s"),t.next=16;break;case 13:t.prev=13,t.t0=t["catch"](7),alert(t.t0);case 16:case"end":return t.stop()}}),t,null,[[7,13]])})))()},dataURLtoFile:function(e,t){var r=e.split(","),n=r[0].match(/:(.*?);/)[1],a=atob(r[1]),o=a.length,c=new Uint8Array(o);while(o--)c[o]=a.charCodeAt(o);return new File([c],t,{type:n})},addNote:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.note,console.log(e.record,r),t.next=4,i.a[e.record.url]["http://www.w3.org/2004/02/skos/core#note"].add(r);case 4:e.note="";case 5:case"end":return t.stop()}}),t)})))()},add:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,n,a,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.path+Object(b["v4"])()+".ttl",n=new Date,a=n.toISOString(),o='@prefix : <#>.\n        @prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#>.\n        @prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>.\n        @prefix dct: <http://purl.org/dc/terms/>.\n        @prefix dbo: <http://dbpedia.org/ontology/>.\n\n        <> rdfs:label "New Record".\n        <> rdf:type dbo:Record.\n        <> dct:created "'.concat(a,'".'),t.next=6,w.postFile(r,o,"text/turtle");case 6:return console.log(r),t.next=9,i.a[e.table.url]["https://www.dublincore.org/specifications/dublin-core/dcmi-terms/hasPart"].add(Object(l["namedNode"])(r));case 9:return t.next=11,i.a[r]["https://www.dublincore.org/specifications/dublin-core/dcmi-terms/partOf"].add(Object(l["namedNode"])(e.table.url));case 11:e.update();case 12:case"end":return t.stop()}}),t)})))()},update:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,w.readFolder(e.path);case 2:e.folder=t.sent,console.log(e.folder.files),e.records=[],e.folder.files.forEach(function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(r){var n,a,o,s,l,u,d,p,f,b,h,m,w,v,x,g,k,R;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,i.a[r.url].label;case 2:n=t.sent,a=[],o=[],s=!0,l=!1,t.prev=7,d=Object(c["a"])(i.a[r.url]["https://www.dublincore.org/specifications/dublin-core/dcmi-terms/hasNote"]);case 9:return t.next=11,d.next();case 11:return p=t.sent,s=p.done,t.next=15,p.value;case 15:if(f=t.sent,s){t.next=22;break}b=f,a.push("".concat(b));case 19:s=!0,t.next=9;break;case 22:t.next=28;break;case 24:t.prev=24,t.t0=t["catch"](7),l=!0,u=t.t0;case 28:if(t.prev=28,t.prev=29,s||null==d.return){t.next=33;break}return t.next=33,d.return();case 33:if(t.prev=33,!l){t.next=36;break}throw u;case 36:return t.finish(33);case 37:return t.finish(28);case 38:h=!0,m=!1,t.prev=40,v=Object(c["a"])(i.a[r.url]["https://www.dublincore.org/specifications/dublin-core/dcmi-terms/hasAttachment"]);case 42:return t.next=44,v.next();case 44:return x=t.sent,h=x.done,t.next=48,x.value;case 48:if(g=t.sent,h){t.next=55;break}k=g,o.push("".concat(k));case 52:h=!0,t.next=42;break;case 55:t.next=61;break;case 57:t.prev=57,t.t1=t["catch"](40),m=!0,w=t.t1;case 61:if(t.prev=61,t.prev=62,h||null==v.return){t.next=66;break}return t.next=66,v.return();case 66:if(t.prev=66,!m){t.next=69;break}throw w;case 69:return t.finish(66);case 70:return t.finish(61);case 71:console.log("n",a),R={name:"".concat(n),notes:a,attachments:o,url:r.url},e.records.push(R);case 74:case"end":return t.stop()}}),t,null,[[7,24,28,38],[29,,33,37],[40,57,61,71],[62,,66,70]])})));return function(e){return t.apply(this,arguments)}}());case 6:case"end":return t.stop()}}),t)})))()},onValidModal:function(){console.log(this.record)}},watch:{url:function(){console.log("tables URL",this.url)}}},x=v,g=r("2877"),k=Object(g["a"])(x,n,a,!1,null,null,null);t["default"]=k.exports}}]);
//# sourceMappingURL=chunk-2d209534.c8322385.js.map